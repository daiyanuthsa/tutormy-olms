import{j as e,H as m,r as x,e as u}from"./app-DUN3Yeit.js";import"./iconify-XNybg_qE.js";import{M as b}from"./MainLayout-Br6MeEK-.js";import"./Navbar-DHh67t-l.js";import"./PrimaryButton-CCBVgbnE.js";import"./ApplicationLogo-BT6uqDno.js";const o=t=>t?Number(String(t).replace(/[^\d]/g,"")).toLocaleString("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}):"",d=({label:t,value:a})=>e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-1",children:t}),e.jsx("p",{className:"text-primary-2 font-semibold",children:a})]}),i=({label:t,value:a})=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:t}),e.jsx("span",{className:"font-semibold",children:a})]}),p=({variant:t,label:a})=>e.jsx("button",{className:`flex-1 py-3 px-6 rounded-2xl font-semibold transition-colors ${t==="solid"?"bg-primary-3 hover:bg-primary-2":"border hover:bg-gray-700"}`,children:a}),y=()=>(x.useEffect(()=>{const t=async()=>{var s,r;try{const n=(s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"),l=await u.post("/booking/payment/doku",{headers:{"X-CSRF-TOKEN":n}});console.log("Payment link response:",l.data);const c=(r=l==null?void 0:l.data)==null?void 0:r.url;window.loadJokulCheckout&&c?window.loadJokulCheckout(c):console.error("Jokul Checkout library belum dimuat atau payment link tidak tersedia")}catch(n){console.error("Gagal mendapatkan payment link:",n)}},a=document.getElementById("checkout-button");return a&&a.addEventListener("click",t),()=>{a&&a.removeEventListener("click",t)}},[]),e.jsx("button",{id:"checkout-button",className:"flex-1 py-3 px-6 rounded-2xl font-semibold transition-colors bg-primary-3 hover:bg-primary-2",children:"Checkout Now"})),g=({checkout:t,user:a,auth:s})=>{var r,n;return e.jsxs("div",{className:"bg-neutral-5 py-6 px-6 lg:px-8 rounded-2xl space-y-5",children:[e.jsx("h3",{className:"text-xl lg:text-3xl font-bold",children:"Ringkasan Pembayaran"}),e.jsxs("div",{className:"rounded-xl border p-4 flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"lg:text-lg font-semibold",children:"KA"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold lg:text-lg",children:(r=s==null?void 0:s.user)==null?void 0:r.name}),e.jsx("p",{className:"text-sm",children:(n=s==null?void 0:s.user)==null?void 0:n.status})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(d,{label:"Tanggal Pembayaran",value:t.started_at?new Date(t.started_at).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"long",day:"numeric"}):"Belum Tersedia"}),e.jsx(d,{label:"Tanggal Berakhir Paket",value:t.ended_at?new Date(t.ended_at).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"long",day:"numeric"}):"Belum Tersedia"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-semibold mb-4",children:"Keterangan Paket"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{label:"Nama Paket",value:t.pricing.name}),e.jsx(i,{label:"Durasi Akses",value:t.pricing.duration+" Bulan"}),e.jsx(i,{label:"Harga Paket",value:o(t.total_sub_amount)}),e.jsx(i,{label:"PPN 12%",value:o(t.total_tax_amount)}),e.jsx("hr",{className:"border-gray-700 my-4"}),e.jsxs("div",{className:"flex justify-between lg:text-lg",children:[e.jsx("span",{className:"text-primary-2 font-semibold",children:"Grand Total"}),e.jsx("span",{className:"text-primary-2 font-bold",children:o(t.total_grand_amount)})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(p,{variant:"outline",label:"Batalkan"}),e.jsx(y,{})]})]})},w=({auth:t,checkout:a})=>e.jsxs(b,{children:[e.jsx(m,{title:"Checkout"}),e.jsx("section",{className:"container mx-auto pb-20 pt-40 text-white flex items-center justify-center",children:e.jsx("div",{className:"w-2/3",children:e.jsx(g,{checkout:a,auth:t})})})]});export{w as default};
