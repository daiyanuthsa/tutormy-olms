import{v as f,j as e,r as h}from"./app-D--FCE5v.js";import{M as N}from"./MainLayout-CxDULvZy.js";import{I as j}from"./iconify-BFJX9eNh.js";import{P as b}from"./PrimaryButton-BadDQMwB.js";import y from"./UpdatePasswordForm-DIGz_CGv.js";import{z as w}from"./transition-xV5VONFc.js";import"./Navbar-DQi2t0o_.js";import"./ApplicationLogo-BCIeB3kk.js";import"./TextInput-B6uUxc5u.js";import"./InputLabel-Dfd0AcfC.js";const S=1e3,d=({label:l,type:s,value:t,onChange:r,icon:n})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:l}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:s,value:t,onChange:r,className:"w-full bg-transparent border border-primary-1 rounded-full px-4 py-3 focus:outline-none focus:border-primary-3"}),n&&e.jsx(j,{icon:n,className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 pointer-events-none"})]})]}),k=({name:l,value:s,label:t,checked:r,onChange:n})=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-transparent border border-primary-1 rounded-full px-8 lg:px-10 py-3",children:[e.jsx("input",{type:"radio",name:l,value:s,checked:r,onChange:n,className:"w-4 h-4 text-primary-3 bg-transparent border-primary-1 focus:ring-primary-3"}),e.jsx("span",{className:"text-sm",children:t})]}),C=()=>{const[l,s]=h.useState(!1),[t,r]=h.useState(null),n=h.useRef(),{setData:a,put:i,processing:c,reset:m,recentlySuccessful:o}=f({photo:null}),g=p=>{const x=p.target.files[0];if(a("photo",x),!x)return r(null);const u=new FileReader;u.onloadend=()=>r(u.result),u.readAsDataURL(x)},v=p=>{p.preventDefault(),i(route("profile.photo.update"),{preserveScroll:!0,onSuccess:()=>{m(),r(null),s(!1)}})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-5",children:[e.jsx("img",{src:"/assets/teacher.png",alt:"profile",className:"w-24 h-24 md:w-28 md:h-28 rounded-full object-cover"}),e.jsx("button",{className:"border px-4 py-2.5 text-xs rounded-full",onClick:()=>s(!0),children:"Upload foto baru"})]}),l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-neutral-4 border-primary-3 border rounded-2xl p-6 w-[90%] max-w-md",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Upload Foto Baru"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:g,ref:n,className:"text-sm"}),t&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm mb-2",children:"Preview:"}),e.jsx("img",{src:t,alt:"Preview",className:"w-28 h-28 rounded-full object-cover"})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(b,{type:"button",className:"px-4 py-2 rounded-full",onClick:()=>{s(!1),m(),r(null)},children:"Batal"}),e.jsx(b,{type:"submit",disabled:c,className:"rounded-full px-4 py-2",children:"Simpan"})]}),e.jsx(w,{show:o,enter:"transition-opacity duration-300",enterFrom:"opacity-0",leave:"transition-opacity duration-300",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-green-600 text-sm mt-2",children:"Foto berhasil diubah!"})})]})]})})]})},F=({data:l,setData:s,errors:t,processing:r,handleSubmit:n})=>e.jsxs("form",{onSubmit:n,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-xl font-semibold mb-4",children:"About"}),e.jsx("textarea",{value:l.about,onChange:a=>s("about",a.target.value),placeholder:"Deskripsikan dirimu secara singkat",className:"w-full h-40 px-4 py-3 bg-neutral-5 rounded-2xl resize-none text-sm",maxLength:S}),t.about&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:t.about})]}),e.jsx(d,{label:"Nama Lengkap",type:"text",icon:"tabler:x",value:l.name,onChange:a=>s("name",a.target.value)}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{name:"status",value:l.status,onChange:a=>s("status",a.target.value),className:"w-full bg-transparent border border-primary-1 rounded-full px-4 py-3 text-white focus:outline-none focus:border-primary-3 appearance-none",children:["mahasiswa","pelajar","pekerja"].map(a=>e.jsx("option",{value:a,className:"bg-neutral-4 text-white capitalize",children:a.charAt(0).toUpperCase()+a.slice(1)},a))}),e.jsx(j,{icon:"tabler:chevron-down",className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 pointer-events-none"})]})]}),e.jsx(d,{label:"Email",type:"email",value:l.email,onChange:a=>s("email",a.target.value)}),e.jsx(d,{label:"Tanggal Lahir",type:"date",value:l.date_birth,onChange:a=>s("date_birth",a.target.value),icon:"tabler:calendar"}),e.jsx(d,{label:"Nomor WhatsApp",type:"tel",value:l.phone,onChange:a=>s("phone",a.target.value),icon:"tabler:x"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Jenis Kelamin"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:[{value:"M",label:"Laki-Laki"},{value:"F",label:"Perempuan"}].map(({value:a,label:i})=>e.jsx(k,{name:"gender",value:a,label:i,checked:l.gender===a,onChange:c=>s("gender",c.target.value)},a))}),t.gender&&e.jsx("p",{className:"text-red-500 text-sm",children:t.gender})]}),Object.keys(t).length>0&&e.jsx("div",{className:"md:col-span-2 text-red-500 text-sm space-y-1",children:Object.values(t).map((a,i)=>e.jsx("div",{children:a},i))}),e.jsx("div",{className:"md:col-span-2 flex justify-center",children:e.jsx(b,{className:"rounded-2xl w-full md:w-80",type:"submit",disabled:r,children:"Simpan"})})]}),B=({auth:l})=>{const s=(l==null?void 0:l.user)||{},t=o=>o?o.split("T")[0]:"",{data:r,setData:n,patch:a,processing:i,errors:c}=f({name:s.name||"",email:s.email||"",phone:s.phone||"",date_birth:t(s.date_birth),status:s.status||"",gender:s.gender||"",about:s.about||""}),m=o=>{o.preventDefault(),a(route("profile.update"),{preserveScroll:!0,onSuccess:()=>alert("Profil berhasil diperbarui!")})};return e.jsx(N,{children:e.jsx("main",{className:"py-28 w-full space-y-7",children:e.jsx("section",{className:"text-white",children:e.jsxs("div",{className:"container mx-auto space-y-6",children:[e.jsxs("h6",{className:"text-2xl font-bold",children:["Selamat Datang kembali, ",s.name,"!"]}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-start gap-6 lg:gap-12",children:[e.jsx(C,{}),e.jsxs("div",{className:"flex-1 space-y-20",children:[e.jsx(F,{data:r,setData:n,errors:c,processing:i,handleSubmit:m}),e.jsx("div",{className:"shadow sm:rounded-lg",children:e.jsx(y,{className:"max-w-xl"})})]})]})]})})})})};export{B as default};
