import{v as j,j as e,r as f,m as w}from"./app-C7ISSGxT.js";import{M as S}from"./MainLayout-C3C6zNMT.js";import{I as g}from"./iconify-Ccyr8GLJ.js";import{P as b}from"./PrimaryButton-DZ99-Af3.js";import k from"./UpdatePasswordForm-CW9VkwN-.js";import{z as C}from"./transition-DW0ngFIp.js";import"./Navbar-Rn-8WX_Z.js";import"./ApplicationLogo-CzQYbcPT.js";import"./TextInput-CV7eMs77.js";import"./InputLabel-4RcremmG.js";const F=1e3,p=({label:t,type:s,value:l,onChange:n,icon:r})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:t}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:s,value:l,onChange:n,className:"w-full bg-transparent border border-primary-1 rounded-full px-4 py-3 focus:outline-none focus:border-primary-3"}),r&&e.jsx(g,{icon:r,className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 pointer-events-none"})]})]}),P=({name:t,value:s,label:l,checked:n,onChange:r})=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-transparent border border-primary-1 rounded-full px-8 lg:px-10 py-3",children:[e.jsx("input",{type:"radio",name:t,value:s,checked:n,onChange:r,className:"w-4 h-4 text-primary-3 bg-transparent border-primary-1 focus:ring-primary-3"}),e.jsx("span",{className:"text-sm",children:l})]}),_=({photo:t})=>{const[s,l]=f.useState(!1),[n,r]=f.useState(null),a=f.useRef(),{data:o,setData:m,processing:x,reset:i,recentlySuccessful:v}=j({profile_photo:null}),N=u=>{const c=u.target.files[0];if(m("profile_photo",c),!c)return r(null);const h=new FileReader;h.onloadend=()=>r(h.result),h.readAsDataURL(c)},y=u=>{u.preventDefault();const c=new FormData;c.append("profile_photo",o.profile_photo),w.post(route("profile.photo.update"),c,{preserveScroll:!0,onFinish:()=>{l(!1),i(),r(null)}})};let d=t;return d?d="/storage/"+d.replace(/^storage[\\/]/,""):d="/assets/teacher.png",e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-5",children:[e.jsx("img",{src:n||d,alt:"profile",className:"w-24 h-24 md:w-28 md:h-28 rounded-full object-cover"}),e.jsx("button",{className:"border px-4 py-2.5 text-xs rounded-full",onClick:()=>l(!0),children:"Upload foto baru"})]}),s&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-neutral-4 border-primary-3 border rounded-2xl p-6 w-[90%] max-w-md",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Upload Foto Baru"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx("input",{type:"file",accept:"image/*",name:"profile_photo",onChange:N,ref:a,className:"text-sm"}),n&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm mb-2",children:"Preview:"}),e.jsx("img",{src:n,alt:"Preview",className:"w-28 h-28 rounded-full object-cover"})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(b,{type:"button",className:"px-4 py-2 rounded-full",onClick:()=>{l(!1),i(),r(null)},children:"Batal"}),e.jsx(b,{type:"submit",disabled:x,className:"rounded-full px-4 py-2",children:"Simpan"})]}),e.jsx(C,{show:v,enter:"transition-opacity duration-300",enterFrom:"opacity-0",leave:"transition-opacity duration-300",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-green-600 text-sm mt-2",children:"Foto berhasil diubah!"})})]})]})})]})},L=({data:t,setData:s,errors:l,processing:n,handleSubmit:r})=>e.jsxs("form",{onSubmit:r,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-xl font-semibold mb-4",children:"About"}),e.jsx("textarea",{value:t.about,onChange:a=>s("about",a.target.value),placeholder:"Deskripsikan dirimu secara singkat",className:"w-full h-40 px-4 py-3 bg-neutral-5 rounded-2xl resize-none text-sm",maxLength:F}),l.about&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:l.about})]}),e.jsx(p,{label:"Nama Lengkap",type:"text",icon:"tabler:x",value:t.name,onChange:a=>s("name",a.target.value)}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{name:"status",value:t.status,onChange:a=>s("status",a.target.value),className:"w-full bg-transparent border border-primary-1 rounded-full px-4 py-3 text-white focus:outline-none focus:border-primary-3 appearance-none",children:["mahasiswa","pelajar","pekerja"].map(a=>e.jsx("option",{value:a,className:"bg-neutral-4 text-white capitalize",children:a.charAt(0).toUpperCase()+a.slice(1)},a))}),e.jsx(g,{icon:"tabler:chevron-down",className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 pointer-events-none"})]})]}),e.jsx(p,{label:"Email",type:"email",value:t.email,onChange:a=>s("email",a.target.value)}),e.jsx(p,{label:"Tanggal Lahir",type:"date",value:t.date_birth,onChange:a=>s("date_birth",a.target.value),icon:"tabler:calendar"}),e.jsx(p,{label:"Nomor WhatsApp",type:"tel",value:t.phone,onChange:a=>s("phone",a.target.value),icon:"tabler:x"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Jenis Kelamin"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:[{value:"M",label:"Laki-Laki"},{value:"F",label:"Perempuan"}].map(({value:a,label:o})=>e.jsx(P,{name:"gender",value:a,label:o,checked:t.gender===a,onChange:m=>s("gender",m.target.value)},a))}),l.gender&&e.jsx("p",{className:"text-red-500 text-sm",children:l.gender})]}),Object.keys(l).length>0&&e.jsx("div",{className:"md:col-span-2 text-red-500 text-sm space-y-1",children:Object.values(l).map((a,o)=>e.jsx("div",{children:a},o))}),e.jsx("div",{className:"md:col-span-2 flex justify-center",children:e.jsx(b,{className:"rounded-2xl w-full md:w-80",type:"submit",disabled:n,children:"Simpan"})})]}),T=({auth:t})=>{const s=(t==null?void 0:t.user)||{},l=i=>i?i.split("T")[0]:"",{data:n,setData:r,patch:a,processing:o,errors:m}=j({name:s.name||"",email:s.email||"",phone:s.phone||"",date_birth:l(s.date_birth),status:s.status||"",gender:s.gender||"",about:s.about||""}),x=i=>{i.preventDefault(),a(route("profile.update"),{preserveScroll:!0,onSuccess:()=>alert("Profil berhasil diperbarui!")})};return e.jsx(S,{children:e.jsx("main",{className:"py-28 w-full space-y-7",children:e.jsx("section",{className:"text-white",children:e.jsxs("div",{className:"container mx-auto space-y-6",children:[e.jsxs("h6",{className:"text-2xl font-bold",children:["Selamat Datang kembali, ",s.name,"!"]}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-start gap-6 lg:gap-12",children:[e.jsx(_,{photo:s.photo}),e.jsxs("div",{className:"flex-1 space-y-20",children:[e.jsx(L,{data:n,setData:r,errors:m,processing:o,handleSubmit:x}),e.jsx("div",{className:"shadow sm:rounded-lg",children:e.jsx(k,{className:"max-w-xl"})})]})]})]})})})})};export{T as default};
